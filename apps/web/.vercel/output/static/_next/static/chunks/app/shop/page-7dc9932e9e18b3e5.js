(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[895],{167:(e,a,t)=>{"use strict";t.d(a,{Balance:()=>s});var r=t(8481),n=t(8521),c=t(8526);function s(e){let{initialBalance:a}=e,{displayBalance:t,intensity:s}=(0,n.A)(a),i=(0,c.useMemo)(()=>{if(s<.1)return{};let e=3*s,a=+s;return{animation:s>.3?"shake ".concat(.1-.05*s,"s infinite"):"none",transform:"translate(".concat((Math.random()-.5)*e,"px, ").concat((Math.random()-.5)*e,"px) rotate(").concat((Math.random()-.5)*a,"deg)")}},[s]),l=(0,c.useMemo)(()=>s>.7?"text-green-400":s>.4?"text-green-200":"text-[var(--text)]",[s]);return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center p-6 border-y border-[var(--line)] w-full bg-[rgba(255,255,255,0.02)]",children:[(0,r.jsx)("p",{className:"text-[0.7rem] text-[var(--text-muted)] mb-2 uppercase tracking-widest",children:"solde"}),(0,r.jsxs)("div",{className:"text-[2.5rem] font-light leading-none tracking-tight transition-colors duration-100 ".concat(l),style:i,children:[(0,r.jsx)("span",{className:"tabular-nums",children:t.toFixed(2)}),(0,r.jsx)("span",{className:"text-[var(--text-muted)] text-[1.2rem] ml-1",children:"€"})]})]})}},8420:(e,a,t)=>{"use strict";t.d(a,{ShopGrid:()=>m});var r=t(8481),n=t(8526),c=t(1431);null!=globalThis.prisma||new c.PrismaClient({log:["error"]});let s={souris_gaming:{id:"souris_gaming",name:"Souris Gaming",description:"+0.002€ par clic",category:"click",basePrice:15,effect:.002,maxLevel:3,icon:"\uD83D\uDDB1️"},clavier_meca:{id:"clavier_meca",name:"Clavier M\xe9canique",description:"+0.003€ par clic",category:"click",basePrice:30,effect:.003,maxLevel:3,icon:"⌨️"},setup_complet:{id:"setup_complet",name:"Setup Complet",description:"+0.005€ par clic",category:"click",basePrice:60,effect:.005,maxLevel:3,icon:"\uD83D\uDDA5️"},chaise_gaming:{id:"chaise_gaming",name:"Chaise Gaming",description:"+0.003€ par minute",category:"passive",basePrice:20,effect:.003,maxLevel:3,icon:"\uD83E\uDE91"},rig_minage:{id:"rig_minage",name:"Rig de Minage",description:"+0.006€ par minute",category:"passive",basePrice:50,effect:.006,maxLevel:3,icon:"⛏️"},datacenter:{id:"datacenter",name:"Datacenter",description:"+0.012€ par minute",category:"passive",basePrice:120,effect:.012,maxLevel:3,icon:"\uD83C\uDFE2"},micro_pro:{id:"micro_pro",name:"Micro Pro",description:"+0.008€ par minute en vocal",category:"vocal",basePrice:25,effect:.008,maxLevel:3,icon:"\uD83C\uDF99️"},casque_71:{id:"casque_71",name:"Casque 7.1",description:"+0.012€ par minute en vocal",category:"vocal",basePrice:50,effect:.012,maxLevel:3,icon:"\uD83C\uDFA7"}},i={click:{name:"Clics",description:"Augmente tes gains par clic",icon:"\uD83D\uDC46"},passive:{name:"Passif",description:"Revenus automatiques chaque minute",icon:"\uD83D\uDCA4"},vocal:{name:"Vocal",description:"Bonus quand t'es en vocal",icon:"\uD83C\uDFA4"}};var l=t(6951);let o=(0,l.createServerReference)("408c2d7f112529044c78cf775b5e5621c206b040da",l.callServer,void 0,l.findSourceMapURL,"buyUpgrade");var d=t(8521);function m(e){let{userUpgrades:a,userBalance:t}=e,[c,l]=(0,n.useState)(a),[m,x]=(0,n.useTransition)(),[p,v]=(0,n.useState)(null),[g,h]=(0,n.useState)(null),[b,f]=(0,n.useState)(null),{balance:j,setBalance:N,refreshBalance:y}=(0,d.A)(t.toString()),w=async e=>{h(null),f(null),v(e),x(async()=>{let a=await o(e);if(a.success){l(t=>({...t,[e]:a.newLevel||1})),void 0!==a.newBalance&&N(a.newBalance.toString());let t=s[e];f("".concat(t.icon," ").concat(t.name," niveau ").concat(a.newLevel,"!")),setTimeout(()=>f(null),2e3)}else h(a.error||"Erreur"),setTimeout(()=>h(null),3e3);v(null)})},k=Object.entries(i).map(e=>{let[a,t]=e;return{id:a,...t,upgrades:Object.values(s).filter(e=>e.category===a)}});return(0,r.jsxs)("div",{className:"flex flex-col gap-8",children:[g&&(0,r.jsx)("div",{className:"text-center p-3 border border-red-500/30 bg-red-500/10 text-red-400 text-sm animate-fade-in",children:g}),b&&(0,r.jsx)("div",{className:"text-center p-3 border border-green-500/30 bg-green-500/10 text-green-400 text-sm animate-fade-in",children:b}),k.map(e=>(0,r.jsxs)("section",{className:"flex flex-col gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 pb-2 border-b border-[var(--line)]",children:[(0,r.jsx)("span",{className:"text-lg",children:e.icon}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-sm font-medium",children:e.name}),(0,r.jsx)("p",{className:"text-[0.7rem] text-[var(--text-muted)]",children:e.description})]})]}),(0,r.jsx)("div",{className:"grid gap-3",children:e.upgrades.map(e=>{let a=c[e.id]||0,t=a>=e.maxLevel,n=t?0:Math.round(e.basePrice*([1,1.5,2][a]||1)),s=parseFloat(j)>=n,i=p===e.id;return(0,r.jsxs)("div",{className:"\n                    flex items-center justify-between p-4 \n                    border border-[var(--line)] \n                    bg-[rgba(255,255,255,0.01)]\n                    transition-all duration-200\n                    ".concat(t?"opacity-50":"","\n                    ").concat(!t&&s?"hover:border-[var(--text-muted)] hover:bg-[rgba(255,255,255,0.02)]":"","\n                  "),children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("span",{className:"text-2xl",children:e.icon}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium",children:e.name}),(0,r.jsx)("p",{className:"text-[0.7rem] text-[var(--text-muted)]",children:e.description})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"flex gap-1",children:Array.from({length:e.maxLevel}).map((e,t)=>(0,r.jsx)("div",{className:"\n                            w-2 h-2 rounded-full transition-colors\n                            ".concat(t<a?"bg-green-500":"bg-[var(--line)]","\n                          ")},t))}),t?(0,r.jsx)("span",{className:"text-[0.7rem] text-green-500 uppercase tracking-wider px-3 py-1.5",children:"max"}):(0,r.jsx)("button",{onClick:()=>w(e.id),disabled:!s||m,className:"\n                          px-3 py-1.5 text-[0.75rem] \n                          border transition-all duration-200\n                          ".concat(s&&!m?"border-[var(--text-muted)] hover:border-[var(--text)] hover:bg-[rgba(255,255,255,0.05)] cursor-pointer":"border-[var(--line)] text-[var(--text-muted)] cursor-not-allowed opacity-50","\n                          ").concat(i?"animate-pulse":"","\n                        "),children:i?"...":"".concat(n,"€")})]})]},e.id)})})]},e.id)),(0,r.jsxs)("div",{className:"mt-4 p-4 border border-[var(--line)] bg-[rgba(255,255,255,0.01)]",children:[(0,r.jsx)("h3",{className:"text-[0.7rem] uppercase tracking-widest text-[var(--text-muted)] mb-3",children:"tes bonus actifs"}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-lg font-mono",children:["+",u("click",c).toFixed(3),"€"]}),(0,r.jsx)("p",{className:"text-[0.65rem] text-[var(--text-muted)]",children:"par clic"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-lg font-mono",children:["+",u("passive",c).toFixed(3),"€"]}),(0,r.jsx)("p",{className:"text-[0.65rem] text-[var(--text-muted)]",children:"par min"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-lg font-mono",children:["+",u("vocal",c).toFixed(3),"€"]}),(0,r.jsx)("p",{className:"text-[0.65rem] text-[var(--text-muted)]",children:"vocal/min"})]})]})]})]})}function u(e,a){let t=0;for(let[r,n]of Object.entries(a)){let a=s[r];a&&a.category===e&&(t+=a.effect*n)}return t}},8521:(e,a,t)=>{"use strict";t.d(a,{A:()=>i,BalanceProvider:()=>s});var r=t(8481),n=t(8526);let c=(0,n.createContext)(null);function s(e){let{children:a,initialBalance:t}=e,[s,i]=(0,n.useState)(t),[l,o]=(0,n.useState)(parseFloat(t)),[d,m]=(0,n.useState)(0),u=(0,n.useRef)([]),x=(0,n.useRef)(null),p=(0,n.useCallback)((e,a)=>{x.current&&cancelAnimationFrame(x.current);let t=performance.now(),r=n=>{let c=Math.min((n-t)/150,1);o(e+(a-e)*(1-Math.pow(1-c,3))),c<1&&(x.current=requestAnimationFrame(r))};x.current=requestAnimationFrame(r)},[]),v=(0,n.useCallback)(e=>{p(l,parseFloat(e)),i(e)},[l,p]),g=(0,n.useCallback)(e=>{let a=Date.now();u.current.push(a),u.current=u.current.filter(e=>a-e<1e3),m(Math.min(u.current.length/12,1)),i(a=>{let t=parseFloat(a)+e;return p(l,t),t.toFixed(2)})},[l,p]);(0,n.useEffect)(()=>{let e=setInterval(()=>{m(e=>e<=.01?0:.85*e)},50);return()=>clearInterval(e)},[]);let h=(0,n.useCallback)(async()=>{try{let e=await fetch("/api/balance"),a=await e.json(),t=parseFloat(a.balance);p(l,t),i(a.balance)}catch(e){}},[l,p]);return(0,r.jsx)(c.Provider,{value:{balance:s,displayBalance:l,intensity:d,setBalance:v,addToBalance:g,refreshBalance:h},children:a})}function i(e){let a=(0,n.useContext)(c),[t,r]=(0,n.useState)(e),[s,i]=(0,n.useState)(parseFloat(e)),l=(0,n.useCallback)(e=>{r(a=>{let t=parseFloat(a)+e;return i(t),t.toFixed(2)})},[]),o=(0,n.useCallback)(async()=>{try{let e=await fetch("/api/balance"),a=await e.json();r(a.balance),i(parseFloat(a.balance))}catch(e){}},[]);return a||{balance:t,displayBalance:s,intensity:0,setBalance:r,addToBalance:l,refreshBalance:o}}},9204:(e,a,t)=>{Promise.resolve().then(t.bind(t,167)),Promise.resolve().then(t.bind(t,8420)),Promise.resolve().then(t.t.bind(t,4816,23))}},e=>{e.O(0,[816,741,59,498,358],()=>e(e.s=9204)),_N_E=e.O()}]);