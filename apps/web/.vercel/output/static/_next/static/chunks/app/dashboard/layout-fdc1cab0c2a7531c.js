(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[573],{3117:(e,a,t)=>{Promise.resolve().then(t.bind(t,8521))},8521:(e,a,t)=>{"use strict";t.d(a,{A:()=>s,BalanceProvider:()=>c});var l=t(8481),n=t(8526);let r=(0,n.createContext)(null);function c(e){let{children:a,initialBalance:t}=e,[c,s]=(0,n.useState)(t),[u,i]=(0,n.useState)(parseFloat(t)),[o,b]=(0,n.useState)(0),p=(0,n.useRef)([]),h=(0,n.useRef)(null),f=(0,n.useCallback)((e,a)=>{h.current&&cancelAnimationFrame(h.current);let t=performance.now(),l=n=>{let r=Math.min((n-t)/150,1);i(e+(a-e)*(1-Math.pow(1-r,3))),r<1&&(h.current=requestAnimationFrame(l))};h.current=requestAnimationFrame(l)},[]),F=(0,n.useCallback)(e=>{f(u,parseFloat(e)),s(e)},[u,f]),d=(0,n.useCallback)(e=>{let a=Date.now();p.current.push(a),p.current=p.current.filter(e=>a-e<1e3),b(Math.min(p.current.length/12,1)),s(a=>{let t=parseFloat(a)+e;return f(u,t),t.toFixed(2)})},[u,f]);(0,n.useEffect)(()=>{let e=setInterval(()=>{b(e=>e<=.01?0:.85*e)},50);return()=>clearInterval(e)},[]);let k=(0,n.useCallback)(async()=>{try{let e=await fetch("/api/balance"),a=await e.json(),t=parseFloat(a.balance);f(u,t),s(a.balance)}catch(e){}},[u,f]);return(0,l.jsx)(r.Provider,{value:{balance:c,displayBalance:u,intensity:o,setBalance:F,addToBalance:d,refreshBalance:k},children:a})}function s(e){let a=(0,n.useContext)(r),[t,l]=(0,n.useState)(e),[c,s]=(0,n.useState)(parseFloat(e)),u=(0,n.useCallback)(e=>{l(a=>{let t=parseFloat(a)+e;return s(t),t.toFixed(2)})},[]),i=(0,n.useCallback)(async()=>{try{let e=await fetch("/api/balance"),a=await e.json();l(a.balance),s(parseFloat(a.balance))}catch(e){}},[]);return a||{balance:t,displayBalance:c,intensity:0,setBalance:l,addToBalance:u,refreshBalance:i}}}},e=>{e.O(0,[59,498,358],()=>e(e.s=3117)),_N_E=e.O()}]);