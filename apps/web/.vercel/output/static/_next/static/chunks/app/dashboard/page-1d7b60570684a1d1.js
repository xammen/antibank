(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{167:(e,t,n)=>{"use strict";n.d(t,{Balance:()=>l});var a=n(8481),r=n(8521),s=n(8526);function l(e){let{initialBalance:t}=e,{displayBalance:n,intensity:l}=(0,r.A)(t),i=(0,s.useMemo)(()=>{if(l<.1)return{};let e=3*l,t=+l;return{animation:l>.3?"shake ".concat(.1-.05*l,"s infinite"):"none",transform:"translate(".concat((Math.random()-.5)*e,"px, ").concat((Math.random()-.5)*e,"px) rotate(").concat((Math.random()-.5)*t,"deg)")}},[l]),c=(0,s.useMemo)(()=>l>.7?"text-green-400":l>.4?"text-green-200":"text-[var(--text)]",[l]);return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-6 border-y border-[var(--line)] w-full bg-[rgba(255,255,255,0.02)]",children:[(0,a.jsx)("p",{className:"text-[0.7rem] text-[var(--text-muted)] mb-2 uppercase tracking-widest",children:"solde"}),(0,a.jsxs)("div",{className:"text-[2.5rem] font-light leading-none tracking-tight transition-colors duration-100 ".concat(c),style:i,children:[(0,a.jsx)("span",{className:"tabular-nums",children:n.toFixed(2)}),(0,a.jsx)("span",{className:"text-[var(--text-muted)] text-[1.2rem] ml-1",children:"€"})]})]})}},2006:(e,t,n)=>{"use strict";n.d(t,{SignOutButton:()=>s});var a=n(8481),r=n(3361);function s(){return(0,a.jsx)("button",{onClick:()=>(0,r.CI)({callbackUrl:"/"}),className:" text-[0.75rem] text-[var(--text-muted)]  border-b border-transparent hover:text-[var(--text)] hover:border-[var(--line)]  transition-all duration-200 ",children:"deconnexion"})}},2762:(e,t,n)=>{"use strict";n.d(t,{Clicker:()=>o});var a=n(8481),r=n(8526),s=n(6951);let l=(0,s.createServerReference)("401005ba7d6691223e16e0cd9224864505bc8b5d7b",s.callServer,void 0,s.findSourceMapURL,"click");var i=n(8521);let c=0;function o(e){let{userId:t}=e,[n,s]=(0,r.useState)(!1),[o,u]=(0,r.useState)([]),[d,m]=(0,r.useState)(null),[x,h]=(0,r.useState)([]),[f,v]=(0,r.useState)(1e3),{addToBalance:p}=(0,i.A)("0"),b=(0,r.useRef)(null),g=(0,r.useRef)(null);(0,r.useEffect)(()=>{fetch("/api/clicks-remaining").then(e=>e.json()).then(e=>v(e.remaining)).catch(()=>{})},[]);let j=(0,r.useCallback)(e=>{let n=e.currentTarget.getBoundingClientRect(),a=e.clientX-n.left,r=e.clientY-n.top,i=c++;u(e=>[...e,{id:i,x:a,y:r}]),setTimeout(()=>{u(e=>e.filter(e=>e.id!==i))},500);let o=(Math.random()-.5)*80,d=-20+(Math.random()-.5)*20,x=c++;h(e=>[...e,{id:x,x:o,y:d}]),setTimeout(()=>{h(e=>e.filter(e=>e.id!==x))},700),s(!0),setTimeout(()=>s(!1),80),g.current&&clearTimeout(g.current),l(t).then(e=>{e.success?(p(.01),m(null),void 0!==e.clicksRemaining&&v(e.clicksRemaining)):(m(e.error||"erreur"),void 0!==e.clicksRemaining&&v(e.clicksRemaining),g.current=setTimeout(()=>m(null),2e3))})},[t,p]);return(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4 w-full",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 pointer-events-none overflow-visible",style:{zIndex:100},children:x.map(e=>(0,a.jsx)("span",{className:"absolute left-1/2 top-0 whitespace-nowrap text-[1rem] font-medium text-green-400  animate-float-up",style:{marginLeft:e.x,marginTop:e.y,textShadow:"0 0 10px rgba(74,222,128,0.8), 0 0 20px rgba(74,222,128,0.4)"},children:"+0.01€"},e.id))}),(0,a.jsx)("div",{className:"\n            absolute -inset-2 rounded-full transition-all duration-200\n            ".concat(n?"bg-gradient-to-r from-green-500/20 to-emerald-500/20 blur-xl opacity-100":"opacity-0","\n          ")}),(0,a.jsxs)("button",{ref:b,onClick:j,className:"\n            relative z-10 overflow-hidden\n            w-32 h-32 rounded-full \n            border-2 \n            flex items-center justify-center\n            text-[3rem] font-light select-none\n            bg-[var(--bg)]\n            transition-all duration-100 ease-out\n            hover:border-[var(--text-muted)] hover:text-[var(--text)]\n            active:scale-[0.95]\n            ".concat(n?"scale-[0.93] border-green-500/70 text-white shadow-[0_0_20px_rgba(74,222,128,0.3)]":"border-[var(--line)] text-[var(--text-muted)]","\n          "),children:[o.map(e=>(0,a.jsx)("span",{className:"absolute rounded-full bg-white/30 animate-ripple",style:{left:e.x,top:e.y,transform:"translate(-50%, -50%)"}},e.id)),(0,a.jsx)("span",{className:"relative z-10",children:"€"})]})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("span",{className:"text-[0.7rem] text-[var(--text-muted)]",children:f>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-[var(--text)] tabular-nums",children:f})," clics restants"]}):(0,a.jsx)("span",{className:"text-red-400",children:"limite atteinte"})})}),(0,a.jsx)("div",{className:"h-4 text-center",children:d&&(0,a.jsx)("p",{className:"text-[0.75rem] text-red-400",children:d})})]})}},6951:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{callServer:function(){return a.callServer},createServerReference:function(){return s.createServerReference},findSourceMapURL:function(){return r.findSourceMapURL}});let a=n(7932),r=n(8208),s=n(1212)},7194:(e,t,n)=>{Promise.resolve().then(n.bind(n,167)),Promise.resolve().then(n.bind(n,2762)),Promise.resolve().then(n.bind(n,2006)),Promise.resolve().then(n.bind(n,8580)),Promise.resolve().then(n.t.bind(n,4816,23))},8521:(e,t,n)=>{"use strict";n.d(t,{A:()=>i,BalanceProvider:()=>l});var a=n(8481),r=n(8526);let s=(0,r.createContext)(null);function l(e){let{children:t,initialBalance:n}=e,[l,i]=(0,r.useState)(n),[c,o]=(0,r.useState)(parseFloat(n)),[u,d]=(0,r.useState)(0),m=(0,r.useRef)([]),x=(0,r.useRef)(null),h=(0,r.useCallback)((e,t)=>{x.current&&cancelAnimationFrame(x.current);let n=performance.now(),a=r=>{let s=Math.min((r-n)/150,1);o(e+(t-e)*(1-Math.pow(1-s,3))),s<1&&(x.current=requestAnimationFrame(a))};x.current=requestAnimationFrame(a)},[]),f=(0,r.useCallback)(e=>{h(c,parseFloat(e)),i(e)},[c,h]),v=(0,r.useCallback)(e=>{let t=Date.now();m.current.push(t),m.current=m.current.filter(e=>t-e<1e3),d(Math.min(m.current.length/12,1)),i(t=>{let n=parseFloat(t)+e;return h(c,n),n.toFixed(2)})},[c,h]);(0,r.useEffect)(()=>{let e=setInterval(()=>{d(e=>e<=.01?0:.85*e)},50);return()=>clearInterval(e)},[]);let p=(0,r.useCallback)(async()=>{try{let e=await fetch("/api/balance"),t=await e.json(),n=parseFloat(t.balance);h(c,n),i(t.balance)}catch(e){}},[c,h]);return(0,a.jsx)(s.Provider,{value:{balance:l,displayBalance:c,intensity:u,setBalance:f,addToBalance:v,refreshBalance:p},children:t})}function i(e){let t=(0,r.useContext)(s),[n,a]=(0,r.useState)(e),[l,i]=(0,r.useState)(parseFloat(e)),c=(0,r.useCallback)(e=>{a(t=>{let n=parseFloat(t)+e;return i(n),n.toFixed(2)})},[]),o=(0,r.useCallback)(async()=>{try{let e=await fetch("/api/balance"),t=await e.json();a(t.balance),i(parseFloat(t.balance))}catch(e){}},[]);return t||{balance:n,displayBalance:l,intensity:0,setBalance:a,addToBalance:c,refreshBalance:o}}},8580:(e,t,n)=>{"use strict";n.d(t,{VoiceStatus:()=>l});var a=n(8481),r=n(8526),s=n(8521);function l(){let[e,t]=(0,r.useState)({inVoice:!1}),[n,l]=(0,r.useState)(!0),[i,c]=(0,r.useState)(60),[o,u]=(0,r.useState)(!1),{refreshBalance:d}=(0,s.A)("0"),m=(0,r.useRef)(-1);return((0,r.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/voice-status"),n=await e.json();t(n)}catch(e){t({inVoice:!1})}};e();let n=setInterval(e,5e3);return()=>clearInterval(n)},[]),(0,r.useEffect)(()=>{if(!e.inVoice)return;let t=setInterval(()=>{l(e=>!e)},1e3);return()=>clearInterval(t)},[e.inVoice]),(0,r.useEffect)(()=>{if(!e.inVoice)return;let t=()=>{let e=new Date,t=e.getMinutes();c(60-e.getSeconds()),-1!==m.current&&m.current!==t&&(d(),u(!0),setTimeout(()=>u(!1),500)),m.current=t};t();let n=setInterval(t,1e3);return()=>clearInterval(n)},[e.inVoice,d]),e.inVoice)?(0,a.jsxs)("div",{className:"\n      flex items-center justify-between px-4 py-3 border bg-[rgba(34,197,94,0.05)]\n      transition-all duration-300\n      ".concat(o?"border-green-400 bg-[rgba(34,197,94,0.15)] shadow-[0_0_20px_rgba(34,197,94,0.3)]":"border-green-500/30","\n    "),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"\n            w-2 h-2 rounded-full bg-green-500 \n            transition-opacity duration-300\n            ".concat(n?"opacity-100":"opacity-40","\n          ")}),(0,a.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,a.jsxs)("span",{className:"text-[0.75rem] text-green-400",children:["mining vocal",e.channelName&&(0,a.jsxs)("span",{className:"text-[var(--text-muted)]",children:[" • ",e.channelName]})]}),(0,a.jsxs)("span",{className:"text-[0.7rem] text-[var(--text-muted)]",children:["+",e.earningsPerMin,"€/min",e.othersCount&&e.othersCount>1&&(0,a.jsxs)("span",{children:[" • ",e.othersCount," personnes"]})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end",children:[(0,a.jsxs)("span",{className:"\n          text-[1.1rem] font-light tabular-nums transition-all duration-300\n          ".concat(o?"text-white scale-110":"text-green-400","\n        "),children:[i,"s"]}),(0,a.jsx)("span",{className:"text-[0.6rem] text-[var(--text-muted)]",children:o?"+0.05€!":"prochain gain"})]})]}):null}}},e=>{e.O(0,[816,361,59,498,358],()=>e(e.s=7194)),_N_E=e.O()}]);